Now we understand our environment, what is in it, how we are expected to respond to it and how we historically have responded to it, we can iterate upon the ODM to a more interactive degree. Instead of describing the environment, we simulate the environment and incidents whch can occur within them.

Previously, our ODM represented the physical and logical topology of the line, represented in the below image:

<img src="/Images/jctnoverview.png"
     alt="Figure 1"
     style="width:800px;max-width:100%;height:auto;border-radius:8px;" />

Now, we represent the operational logic of the system as a series of states which represent how the train interacts with the ecosystem. A train, in any given situation, can do one of three things, continue as is, slow down or speed up. However, as we understand, the ecosystem has priority over the cab. Our investigation of [G](ref:g) revealed that on our specific line, drivers are expected to react to an AWS alert immediately, with the AWS alert taking priority over everything, so, in our ODM we need to represent AWS as a seperate entity.

This results in a basic state diagram below:

<img src="/Images/TrainSMSimple.png"
     alt="Figure 2"
     style="width:800px;max-width:100%;height:auto;border-radius:8px;" />

However, when considering the hazards identified previously, our reactions to hazards do not fit within this state machine. So now, we expand our state machine to fit the possible outcomes required by the ego-vehicle and we also create a relationship diagram between our states, to determine what could cause us to enter a given state, we call these ['milestones'](/#/steps/4-metrics/examples/4-e).

During standard operation, considering no anomalous external factors, a train is in 'cruise' a state which maintains speed and standard operation. In order to leave 'cruise' one of three things must happen, the first, is a standard exit of cruise, when the train approaches a point on it's journey where the **speed limit changes** then it would need to either speed up, or slow down. Within this example, **speed limit change** is the milestone that causes a transition [towards the state of speed change or brake change.](cite:MilestoneNote)

The second is a verified exit of cruise, at random intervals throughout transit, the **AWS Alarm** will sound, regardless of state of operation, the **AWS Alarm** takes priority, requiring whatever is operating the train to respond immediately, meaning there always must be a direct transition from any given state to AWS.

The third is an emergency exit of cruise, this can be triggered by any number of reasons, but sticking with the theme established within [D9](ref:d9) a **detection of low wheel adhesion** would be a cause for an emergency break, meaning the transition between cruise and E-break.